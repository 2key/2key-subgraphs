specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: TwoKeyPlasmaEvents
    network: plasma
    source:
      address: "0x36e66a5300113b2fc18f39758a95fad6d8a3463e"
      abi: TwoKeyPlasmaEvents
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Campaign
        - Conversion
        - Join
        - JoinEvent
        - Meta
        - PlasmaToEthereumMappingEvent
        - User
        - Test
        - Visit
        - VisitEvent
      abis:
        - name: TwoKeyPlasmaEvents
          file: ./abis/TwoKeyPlasmaEvents.json
      eventHandlers:
        - event: Visited(indexed address,indexed address,indexed address,address)
          handler: handleVisited
        - event: Plasma2Ethereum(address,address)
          handler: handlePlasma2Ethereum # from around 20/12/2019 it's been called from PlasmaEventsSource
        - event: Plasma2Handle(address,string)
          handler: handleHandled # from around 20/12/2019 it's been called from PlasmaEventsSource
        - event: Joined(address,address,address)
          handler: handleJoined
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: TwoKeyPlasmaEventSource
    network: plasma
    source:
      address: "0xd701037bb6e1df5b8ff0501a1163d4228542fae0"
      abi: TwoKeyPlasmaEventSource
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Campaign
        - Conversion
        - Join
        - JoinEvent
        - Meta
        - PlasmaToEthereumMappingEvent
        - User
        - Test
        - Visit
        - ForwardedByCampaign
        - CampaignPlasmaByWeb3
        - CampaignWeb3ByPlasma
      abis:
        - name: TwoKeyPlasmaEventSource
          file: ./abis/TwoKeyPlasmaEventSource.json
      eventHandlers:
        - event: Plasma2Ethereum(address,address)
          handler: handlePlasma2Ethereum
        - event: Plasma2Handle(address,string)
          handler: handleHandled
        - event: CPCCampaignCreated(address,address)
          handler: handleCPCCampaignCreated
        - event: ConversionCreated(address,address,uint256,address,address)
          handler: handleConversionCreated
        - event: ConversionExecuted(address,uint256)
          handler: handleConversionExecuted
        - event: ConversionRejected(address,uint256,uint256)
          handler: handleConversionRejected
        - event: PlasmaMirrorCampaigns(address,address)
          handler: handlePlasmaMirrorCampaigns
        - event: HandleChanged(address,string)
          handler: handleChangedHandle
        - event: ConversionPaid(address,uint256)
          handler: handleConversionPaid
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: TwoKeyPlasmaReputationRegistry
    network: plasma
    source:
      address: "0x465be789e1162685d9430f8c6e1f073f31b09723"
      abi: TwoKeyPlasmaReputationRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Reputation
        - Feedback
      abis:
        - name: TwoKeyPlasmaReputationRegistry
          file: ./abis/TwoKeyPlasmaReputationRegistry.json
      eventHandlers:
        - event: ReputationUpdated(address,string,string,int256,address)
          handler: handleReputationUpdated
        - event: FeedbackSubmitted(address,string,string,int256,address,address)
          handler: handleFeedbackSubmitted
      file: ./src/mapping.ts
